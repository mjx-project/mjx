#include "gtest/gtest.h"
#include "state.h"
#include "utils.h"

using namespace mj;

// From https://tenhou.net/0/?log=2011020417gm-00a9-0000-b67fcaa3&tw=1
std::vector<std::string> data_from_tenhou = {
    R"({"playerIds":["-ron-","ASAPIN","うきでん","超ヒモリロ"],"initScore":{"ten":[25000,25000,25000,25000]},"doras":[112],"eventHistory":{"events":[{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":39},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":70},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":125},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":5},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":121},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":32},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":102},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":114},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":19},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":24},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":90},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":108},{},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","tile":122},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":17},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_WEST","tile":134},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_NORTH","tile":109},{},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","tile":116},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_SOUTH","tile":127},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_WEST","tile":105},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":100},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":7},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":10},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":26},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":120},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":28},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":98},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":55},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":18},{},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","tile":15},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_RIICHI","who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":115},{"type":"EVENT_TYPE_RIICHI_SCORE_CHANGE","who":"ABSOLUTE_POS_INIT_SOUTH"},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":68},{"type":"EVENT_TYPE_CHI","who":"ABSOLUTE_POS_INIT_NORTH","open":42031},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":23},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":34},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_SOUTH","tile":50},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":31},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":20},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":107},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_SOUTH","tile":97},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":30},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_NORTH","tile":25},{},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","tile":35},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_SOUTH","tile":60},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":29},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":38},{},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","tile":135},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_SOUTH","tile":59},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":37},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_NORTH","tile":9},{},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","tile":27},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_SOUTH","tile":53},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":132},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":67},{},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","tile":110},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_SOUTH","tile":22},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":66},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_NORTH","tile":69},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":48},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_SOUTH","tile":33},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_WEST","tile":8},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":42},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":96},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_SOUTH","tile":64},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":124},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":41},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":21},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_SOUTH","tile":104},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":6},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_NORTH","tile":71},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":16},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_SOUTH","tile":111},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":4},{"type":"EVENT_TYPE_NO_WINNER"}]},"wall":[48,16,19,34,17,62,79,52,55,30,12,26,120,130,42,67,2,76,13,7,56,57,82,98,31,90,3,4,114,93,5,61,128,1,39,121,32,103,24,70,80,125,66,102,20,108,41,100,87,54,78,84,107,47,14,131,96,51,68,85,28,10,6,18,122,49,134,109,116,127,105,65,92,101,29,23,83,115,77,38,15,43,94,21,50,91,89,45,97,37,25,35,60,132,119,135,59,0,9,27,53,58,118,110,22,124,69,44,33,8,74,129,64,88,72,75,104,73,71,81,111,86,36,99,133,11,40,113,123,95,112,117,46,126,63,106],"uraDoras":[117],"privateInfos":[{"initHand":[48,16,19,34,2,76,13,7,128,1,39,121,87],"draws":[107,96,28,122,116,92,83,15,21,45,35,135,27,110,44,129,75,81]},{"who":"ABSOLUTE_POS_INIT_SOUTH","initHand":[17,62,79,52,56,57,82,98,32,103,24,70,54],"draws":[47,51,10,49,127,101,115,43,50,97,60,59,53,22,33,64,104,111]},{"who":"ABSOLUTE_POS_INIT_WEST","initHand":[55,30,12,26,31,90,3,4,80,125,66,102,78],"draws":[14,68,6,134,105,29,77,94,91,37,132,0,58,124,8,88,73,86]},{"who":"ABSOLUTE_POS_INIT_NORTH","initHand":[120,130,42,67,114,93,5,61,20,108,41,100,84],"draws":[131,85,18,109,65,23,38,89,25,119,9,118,69,74,72,71]}],"terminal":{"finalScore":{"riichi":1,"ten":[24000,27000,24000,24000]},"noWinner":{"tenpais":[{"who":"ABSOLUTE_POS_INIT_SOUTH","closedTiles":[43,47,49,51,52,54,56,57,62,79,82,101,103]}],"tenChanges":[-1000,3000,-1000,-1000]}}})",
    R"({"playerIds":["-ron-","ASAPIN","うきでん","超ヒモリロ"],"initScore":{"round":1,"honba":1,"riichi":1,"ten":[24000,27000,24000,24000]},"doras":[69],"eventHistory":{"events":[{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":122},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":132},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":13},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":68},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":3},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_WEST","tile":130},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_NORTH","tile":27},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":87},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":32},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":43},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_NORTH","tile":54},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":134},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_SOUTH","tile":119},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":81},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_NORTH","tile":135},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":15},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":125},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_WEST","tile":121},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_NORTH","tile":19},{},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","tile":7},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":47},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":50},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":46},{},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","tile":4},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_RIICHI","who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":111},{"type":"EVENT_TYPE_RIICHI_SCORE_CHANGE","who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_PON","who":"ABSOLUTE_POS_INIT_NORTH","open":42538},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":127},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":124},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_SOUTH","tile":30},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":17},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_NORTH","tile":33},{},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","tile":126},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_SOUTH","tile":79},{"type":"EVENT_TYPE_PON","who":"ABSOLUTE_POS_INIT_NORTH","open":30282},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":116},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":117},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_SOUTH","tile":11},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_RIICHI","who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":62},{"type":"EVENT_TYPE_RIICHI_SCORE_CHANGE","who":"ABSOLUTE_POS_INIT_WEST"},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_NORTH","tile":2},{},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","tile":133},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_SOUTH","tile":35},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_WEST","tile":61},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":73},{},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","tile":78},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_SOUTH","tile":120},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_WEST","tile":101},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":100},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":75},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_SOUTH","tile":128},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_WEST","tile":55},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_NORTH","tile":44},{"type":"EVENT_TYPE_RON","who":"ABSOLUTE_POS_INIT_WEST","tile":44}]},"wall":[122,36,38,65,62,49,50,25,46,83,95,100,85,87,20,68,22,3,56,14,52,43,42,9,73,115,127,77,26,89,117,15,32,98,111,47,17,24,81,132,86,110,116,76,134,82,72,75,96,6,13,48,125,37,114,99,97,130,27,107,5,45,54,124,119,58,135,105,10,121,19,7,29,60,108,4,63,106,30,1,33,126,79,51,11,64,2,133,35,61,94,78,120,101,70,92,128,55,44,88,84,23,53,18,67,57,71,31,118,131,109,112,40,0,66,74,113,41,91,28,8,102,90,123,12,104,34,21,80,103,69,59,129,39,16,93],"uraDoras":[59],"privateInfos":[{"initHand":[85,87,20,68,26,89,117,15,134,82,72,75,48],"draws":[99,107,124,105,7,4,106,126,51,133,78,92]},{"who":"ABSOLUTE_POS_INIT_SOUTH","initHand":[122,36,38,65,22,3,56,14,32,98,111,47,96],"draws":[125,97,5,119,10,29,63,30,79,11,35,120,128]},{"who":"ABSOLUTE_POS_INIT_WEST","initHand":[62,49,50,25,52,43,42,9,17,24,81,132,6],"draws":[37,130,45,58,121,60,1,64,61,101,55]},{"who":"ABSOLUTE_POS_INIT_NORTH","initHand":[46,83,95,100,73,115,127,77,86,110,116,76,13],"draws":[114,27,54,135,19,108,33,2,94,70,44]}],"terminal":{"finalScore":{"round":1,"honba":1,"ten":[24000,26000,34300,15700]},"wins":[{"who":"ABSOLUTE_POS_INIT_WEST","fromWho":"ABSOLUTE_POS_INIT_NORTH","closedTiles":[1,6,9,24,25,37,42,44,45,49,52,58,60,64],"winTile":44,"fu":30,"ten":8000,"tenChanges":[0,0,11300,-8300],"yakus":[1,7,52,54,53],"fans":[1,1,1,1,1]}]}})",
    R"({"playerIds":["-ron-","ASAPIN","うきでん","超ヒモリロ"],"initScore":{"round":2,"ten":[24000,26000,34300,15700]},"doras":[67],"eventHistory":{"events":[{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":74},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":115},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":34},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":79},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":114},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":122},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":101},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":99},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_WEST","tile":130},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":121},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":105},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":22},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":35},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":75},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":3},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":15},{"type":"EVENT_TYPE_PON","open":5641},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":10},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_SOUTH","tile":111},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":110},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_NORTH","tile":120},{},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","tile":104},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_SOUTH","tile":29},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":1},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":18},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":82},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":106},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_WEST","tile":95},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_NORTH","tile":113},{},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","tile":27},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":108},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_WEST","tile":103},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_NORTH","tile":20},{},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","tile":102},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":81},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_RIICHI","who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":4},{"type":"EVENT_TYPE_RIICHI_SCORE_CHANGE","who":"ABSOLUTE_POS_INIT_WEST"},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_NORTH","tile":97},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":119},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":94},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_WEST","tile":37},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_NORTH","tile":33},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":116},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":36},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_WEST"},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_NORTH","tile":72},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":96},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":128},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_WEST","tile":17},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":85},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":84},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_SOUTH","tile":2},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_WEST","tile":77},{"type":"EVENT_TYPE_PON","who":"ABSOLUTE_POS_INIT_NORTH","open":29803},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":127},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":124},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":87},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_WEST","tile":98},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_NORTH","tile":92},{},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","tile":117},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":112},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_WEST","tile":39},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_NORTH","tile":129},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":126},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_SOUTH","tile":109},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_WEST","tile":11},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":6},{},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","tile":107},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_SOUTH","tile":131},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_WEST","tile":24},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_NORTH","tile":125},{},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","tile":118},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_SOUTH","tile":93},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_WEST","tile":100},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_NORTH","tile":38},{"type":"EVENT_TYPE_NO_WINNER"}]},"wall":[110,65,114,48,31,64,115,121,13,34,126,82,99,66,87,36,35,62,4,58,6,122,50,78,101,83,55,88,60,133,135,43,52,74,28,49,18,45,12,9,14,63,119,124,15,69,70,79,46,42,44,91,68,76,10,56,21,85,105,22,130,75,3,41,1,30,116,106,111,54,120,104,29,25,59,86,108,95,113,27,81,103,20,102,94,57,97,23,90,37,33,96,128,0,72,84,112,17,127,51,2,77,47,132,98,92,117,40,39,129,71,109,11,16,107,131,24,125,118,93,100,38,32,7,73,61,5,80,53,19,67,8,123,89,26,134],"uraDoras":[8],"privateInfos":[{"initHand":[13,34,126,82,101,83,55,88,14,63,119,124,44],"draws":[10,105,3,116,104,86,27,102,23,96,84,51,47,117,71,107,118]},{"who":"ABSOLUTE_POS_INIT_SOUTH","initHand":[99,66,87,36,60,133,135,43,15,69,70,79,91],"draws":[56,22,41,106,111,29,108,81,94,90,128,112,2,132,40,109,131,93]},{"who":"ABSOLUTE_POS_INIT_WEST","initHand":[110,65,114,48,35,62,4,58,52,74,28,49,46],"draws":[68,21,130,1,54,25,95,103,57,37,0,17,77,98,39,11,24,100]},{"who":"ABSOLUTE_POS_INIT_NORTH","initHand":[31,64,115,121,6,122,50,78,18,45,12,9,42],"draws":[76,85,75,30,120,59,113,20,97,33,72,127,92,129,16,125,38]}],"terminal":{"finalScore":{"round":2,"riichi":1,"ten":[21000,27000,34300,16700]},"noWinner":{"tenpais":[{"who":"ABSOLUTE_POS_INIT_SOUTH","closedTiles":[40,41,43,56,60,66,69,70,90,91,132,133,135]},{"who":"ABSOLUTE_POS_INIT_WEST","closedTiles":[21,25,28,46,48,49,52,54,57,58,62,65,68]},{"who":"ABSOLUTE_POS_INIT_NORTH","closedTiles":[9,12,16,30,31,42,45,50,59,64]}],"tenChanges":[-3000,1000,1000,1000]}}})",
    R"({"playerIds":["-ron-","ASAPIN","うきでん","超ヒモリロ"],"initScore":{"round":2,"honba":1,"riichi":1,"ten":[21000,27000,34300,16700]},"doras":[28],"eventHistory":{"events":[{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":121},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":108},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":120},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":122},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":71},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":118},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":73},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":1},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":130},{"type":"EVENT_TYPE_PON","who":"ABSOLUTE_POS_INIT_SOUTH","open":49705},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":75},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":135},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":115},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":112},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_SOUTH","tile":114},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":34},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":89},{"type":"EVENT_TYPE_PON","who":"ABSOLUTE_POS_INIT_SOUTH","open":34378},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":97},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":98},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_NORTH","tile":39},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":2},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":107},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":125},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":5},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":119},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_SOUTH","tile":84},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":4},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":106},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":132},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_SOUTH","tile":78},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":76},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_NORTH","tile":111},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":129},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_SOUTH","tile":95},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_WEST","tile":94},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":100},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":99},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_SOUTH","tile":80},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":82},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":102},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":36},{"type":"EVENT_TYPE_CHI","who":"ABSOLUTE_POS_INIT_SOUTH","open":21511},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":126},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":110},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":81},{},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","tile":48},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_SOUTH","tile":69},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":3},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":49},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":61},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_SOUTH","tile":13},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_WEST","tile":93},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":12},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":56},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_SOUTH","tile":7},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":6},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_NORTH","tile":103},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":57},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_SOUTH","tile":54},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":101},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_NORTH","tile":127},{},{"type":"EVENT_TYPE_RIICHI"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":37},{"type":"EVENT_TYPE_RIICHI_SCORE_CHANGE"},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_SOUTH","tile":38},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":113},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":59},{},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","tile":79},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_SOUTH","tile":72},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":124},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":58},{},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","tile":134},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":55},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":109},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_NORTH"},{},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","tile":64},{"type":"EVENT_TYPE_PON","who":"ABSOLUTE_POS_INIT_NORTH","open":24617},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":68},{},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","tile":96},{"type":"EVENT_TYPE_NO_WINNER"}]},"wall":[101,135,11,82,108,70,106,77,2,50,112,29,44,55,91,53,21,10,90,17,58,63,100,67,119,57,20,15,1,107,40,30,71,76,130,121,68,5,118,66,73,120,25,8,88,75,97,122,18,115,41,27,4,32,26,128,34,89,19,131,125,98,81,132,114,42,102,124,39,99,126,31,49,129,84,45,74,36,78,110,111,61,95,94,12,47,80,6,83,56,3,60,48,69,65,59,9,13,93,46,24,7,113,103,37,54,104,127,33,38,109,14,79,72,43,35,134,52,51,0,64,96,123,133,92,117,87,22,85,23,28,116,105,16,86,62],"uraDoras":[116],"privateInfos":[{"initHand":[2,50,112,29,119,57,20,15,73,120,25,8,41],"draws":[26,19,132,99,129,36,61,47,56,48,9,24,37,33,79,134,64,96]},{"who":"ABSOLUTE_POS_INIT_SOUTH","initHand":[44,55,91,53,1,107,40,30,88,75,97,122,27],"draws":[128,131,114,126,84,78,95,80,69,13,7,54,38,72,52]},{"who":"ABSOLUTE_POS_INIT_WEST","initHand":[101,135,11,82,21,10,90,17,71,76,130,121,18],"draws":[4,34,125,98,42,124,31,45,110,94,6,3,65,93,113,104,109,43,51]},{"who":"ABSOLUTE_POS_INIT_NORTH","initHand":[108,70,106,77,58,63,100,67,68,5,118,66,115],"draws":[32,89,81,102,39,49,74,111,12,83,60,59,46,103,127,14,35,0]}],"terminal":{"finalScore":{"round":2,"honba":1,"riichi":2,"ten":[21500,28500,32800,15200]},"noWinner":{"tenpais":[{"closedTiles":[8,9,15,19,20,24,25,26,29,33,41,47,50]},{"who":"ABSOLUTE_POS_INIT_SOUTH","closedTiles":[27,30,52,53]}],"tenChanges":[1500,1500,-1500,-1500]}}})",
    R"({"playerIds":["-ron-","ASAPIN","うきでん","超ヒモリロ"],"initScore":{"round":3,"honba":2,"riichi":2,"ten":[21500,28500,32800,15200]},"doras":[73],"eventHistory":{"events":[{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":128},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":29},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":125},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":109},{"type":"EVENT_TYPE_PON","open":42058},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":6},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_SOUTH","tile":131},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":120},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":133},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":15},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":36},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":30},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":116},{"type":"EVENT_TYPE_PON","who":"ABSOLUTE_POS_INIT_SOUTH","open":44618},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":54},{"type":"EVENT_TYPE_PON","open":21097},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":45},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_SOUTH","tile":124},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":7},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":72},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":130},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":12},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":33},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":37},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":97},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_SOUTH","tile":5},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":32},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":24},{},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","tile":28},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_TSUMO","who":"ABSOLUTE_POS_INIT_SOUTH","tile":91}]},"wall":[128,96,24,46,108,69,111,45,17,81,84,119,120,47,43,7,37,116,78,87,60,53,15,115,68,74,125,36,104,30,100,32,102,4,56,133,112,41,6,29,22,12,77,54,88,109,83,59,51,52,70,33,72,42,94,9,131,13,18,130,117,65,64,124,16,0,97,26,1,10,85,5,86,90,28,91,134,35,93,80,14,135,101,98,107,63,105,114,132,55,71,121,39,34,122,40,19,61,20,49,126,129,21,79,2,118,48,58,110,66,113,3,75,95,99,8,67,82,25,76,92,27,123,38,106,50,103,31,89,127,73,11,44,57,23,62],"uraDoras":[11],"privateInfos":[{"initHand":[108,69,111,45,60,53,15,115,112,41,6,29,52],"draws":[42,130,97,85,28]},{"who":"ABSOLUTE_POS_INIT_SOUTH","initHand":[17,81,84,119,68,74,125,36,22,12,77,54,70],"draws":[94,131,117,124,26,5,91]},{"who":"ABSOLUTE_POS_INIT_WEST","initHand":[120,47,43,7,104,30,100,32,88,109,83,59,33],"draws":[9,13,65,16,1,86]},{"who":"ABSOLUTE_POS_INIT_NORTH","initHand":[128,96,24,46,37,116,78,87,102,4,56,133,51],"draws":[72,18,64,0,10,90]}],"terminal":{"finalScore":{"round":3,"honba":2,"ten":[20800,33100,32100,14000]},"wins":[{"who":"ABSOLUTE_POS_INIT_SOUTH","fromWho":"ABSOLUTE_POS_INIT_SOUTH","closedTiles":[17,22,26,68,70,74,77,81,84,91,94],"opens":[44618],"winTile":91,"fu":30,"ten":2000,"tenChanges":[-700,4600,-700,-1200],"yakus":[12,52],"fans":[1,1]}]}})",
    R"({"playerIds":["-ron-","ASAPIN","うきでん","超ヒモリロ"],"initScore":{"round":4,"ten":[20800,33100,32100,14000]},"doras":[60],"eventHistory":{"events":[{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":121},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":118},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":122},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":115},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":105},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":124},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_WEST","tile":28},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":110},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":114},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":74},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":106},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":126},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":128},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_SOUTH","tile":54},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":40},{"type":"EVENT_TYPE_PON","who":"ABSOLUTE_POS_INIT_SOUTH","open":15401},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":63},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_WEST","tile":39},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_NORTH","tile":135},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":45},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":30},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":71},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":31},{},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","tile":113},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_SOUTH","tile":35},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":3},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_NORTH","tile":70},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":1},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_SOUTH","tile":116},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":14},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":48},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":27},{"type":"EVENT_TYPE_CHI","who":"ABSOLUTE_POS_INIT_SOUTH","open":14735},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":23},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_RIICHI","who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":34},{"type":"EVENT_TYPE_RIICHI_SCORE_CHANGE","who":"ABSOLUTE_POS_INIT_WEST"},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_NORTH","tile":32},{},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","tile":134},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_SOUTH","tile":26},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_WEST","tile":38},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_NORTH","tile":125},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":50},{"type":"EVENT_TYPE_RON","who":"ABSOLUTE_POS_INIT_WEST","tile":50}]},"wall":[9,87,95,105,94,43,102,63,29,3,4,93,21,49,104,19,114,45,67,121,23,30,78,118,25,71,72,97,55,48,129,126,27,89,128,91,15,11,124,20,106,22,40,122,13,131,115,59,61,74,81,31,1,42,34,110,16,17,28,101,82,77,52,5,58,54,14,39,135,85,99,6,0,113,35,76,70,56,116,46,66,50,88,32,134,26,38,125,65,80,119,75,7,69,86,103,8,107,108,133,37,98,73,24,90,33,47,123,127,84,83,57,109,68,41,79,120,111,117,53,18,36,10,51,92,112,96,130,100,132,60,2,44,12,64,62],"uraDoras":[2],"privateInfos":[{"initHand":[9,87,95,105,114,45,67,121,27,89,128,91,61],"draws":[1,16,82,58,85,113,56,50,134,65]},{"who":"ABSOLUTE_POS_INIT_SOUTH","initHand":[94,43,102,63,23,30,78,118,15,11,124,20,74],"draws":[42,17,77,54,99,35,116,26]},{"who":"ABSOLUTE_POS_INIT_WEST","initHand":[29,3,4,93,25,71,72,97,106,22,40,122,81],"draws":[34,28,52,14,39,6,76,46,88,38]},{"who":"ABSOLUTE_POS_INIT_NORTH","initHand":[21,49,104,19,55,48,129,126,13,131,115,59,31],"draws":[110,101,5,135,0,70,66,32,125]}],"terminal":{"finalScore":{"round":4,"ten":[12800,33100,40100,14000]},"wins":[{"who":"ABSOLUTE_POS_INIT_WEST","closedTiles":[4,6,22,25,29,46,50,52,72,76,81,88,93,97],"winTile":50,"fu":40,"ten":8000,"tenChanges":[-8000,0,9000,0],"yakus":[1,54,53],"fans":[1,2,2]}]}})",
    R"({"playerIds":["-ron-","ASAPIN","うきでん","超ヒモリロ"],"initScore":{"round":5,"ten":[12800,33100,40100,14000]},"doras":[72],"eventHistory":{"events":[{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":117},{"type":"EVENT_TYPE_PON","who":"ABSOLUTE_POS_INIT_NORTH","open":45130},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":46},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":105},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":73},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":118},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":81},{},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","tile":108},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":2},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":124},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":103},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":89},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":100},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":43},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":104},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":41},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":27},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_WEST","tile":38},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_NORTH","tile":107},{},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","tile":131},{"type":"EVENT_TYPE_PON","who":"ABSOLUTE_POS_INIT_NORTH","open":50185},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":132},{},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","tile":111},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":62},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_WEST","tile":95},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_NORTH","tile":109},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":120},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":68},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":56},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":3},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":40},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_SOUTH","tile":96},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":61},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_NORTH","tile":58},{},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","tile":133},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_SOUTH","tile":125},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_WEST","tile":102},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_NORTH","tile":98},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":60},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":106},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":101},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_NORTH","tile":14},{},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","tile":91},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_SOUTH","tile":69},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":97},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_NORTH","tile":44},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":63},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_SOUTH","tile":127},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":71},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_NORTH","tile":122},{},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","tile":51},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":47},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_WEST"},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":32},{},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","tile":135},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":42},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":34},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_NORTH","tile":134},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":83},{"type":"EVENT_TYPE_CHI","who":"ABSOLUTE_POS_INIT_SOUTH","open":47591},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":88},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":90},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_NORTH","tile":85},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":75},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":39},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":37},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_NORTH","tile":67},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":35},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_SOUTH","tile":74},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":121},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_NORTH","tile":115},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":59},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":113},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":128},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_NORTH","tile":65},{},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","tile":112},{"type":"EVENT_TYPE_NO_WINNER"}]},"wall":[117,42,114,28,70,124,97,56,5,32,81,46,52,41,105,21,80,87,73,2,33,71,13,118,7,119,129,116,83,40,17,89,31,27,68,25,24,86,90,101,104,103,30,130,50,4,11,60,47,34,3,120,62,59,113,82,22,108,100,43,132,79,88,94,12,63,84,38,107,131,111,77,95,109,8,106,61,16,75,96,6,58,133,125,102,98,23,19,36,14,91,69,37,44,78,127,54,122,51,76,0,10,135,39,121,134,93,64,85,35,9,45,67,18,74,128,115,48,110,26,65,112,29,20,66,49,1,15,55,53,72,99,92,126,123,57],"uraDoras":[99],"privateInfos":[{"initHand":[52,41,105,21,83,40,17,89,50,4,11,60,120],"draws":[59,108,79,63,131,111,8,75,133,23,91,78,51,135,93,35,18,48,112]},{"who":"ABSOLUTE_POS_INIT_SOUTH","initHand":[117,42,114,28,80,87,73,2,31,27,68,25,47],"draws":[62,113,100,88,84,77,106,96,125,19,69,127,76,39,9,74,110]},{"who":"ABSOLUTE_POS_INIT_WEST","initHand":[70,124,97,56,33,71,13,118,24,86,90,101,34],"draws":[82,43,94,38,95,61,6,102,36,37,54,0,121,64,45,128,26]},{"who":"ABSOLUTE_POS_INIT_NORTH","initHand":[5,32,81,46,7,119,129,116,104,103,30,130,3],"draws":[22,132,12,107,109,16,58,98,14,44,122,10,134,85,67,115,65]}],"terminal":{"finalScore":{"round":5,"ten":[11800,32100,39100,17000]},"noWinner":{"tenpais":[{"who":"ABSOLUTE_POS_INIT_NORTH","closedTiles":[5,7,10,12,16,22,30]}],"tenChanges":[-1000,-1000,-1000,3000]}}})",
    R"({"playerIds":["-ron-","ASAPIN","うきでん","超ヒモリロ"],"initScore":{"round":6,"honba":1,"ten":[11800,32100,39100,17000]},"doras":[4],"eventHistory":{"events":[{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":3},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":133},{},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","tile":108},{"type":"EVENT_TYPE_PON","who":"ABSOLUTE_POS_INIT_WEST","open":41578},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":67},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":116},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":35},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_SOUTH","tile":72},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_WEST","tile":69},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_RIICHI","who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":2},{"type":"EVENT_TYPE_RIICHI_SCORE_CHANGE","who":"ABSOLUTE_POS_INIT_NORTH"},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND"},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_SOUTH","tile":134},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_WEST","tile":126},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_NORTH","tile":129},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":38},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":127},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_WEST","tile":128},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_NORTH","tile":135},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":70},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":119},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":131},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_NORTH","tile":43},{},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","tile":68},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":118},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_WEST","tile":117},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_NORTH","tile":61},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":41},{"type":"EVENT_TYPE_CHI","who":"ABSOLUTE_POS_INIT_SOUTH","open":24751},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":65},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":106},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_NORTH","tile":107},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":104},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":102},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_WEST","tile":1},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_NORTH","tile":95},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":105},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_SOUTH","tile":124},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":83},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_NORTH","tile":130},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":75},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_SOUTH","tile":59},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":74},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_NORTH","tile":30},{"type":"EVENT_TYPE_CHI","open":17735},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":73},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":29},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":44},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_NORTH","tile":25},{"type":"EVENT_TYPE_CHI","open":14503},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":82},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":27},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":36},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_NORTH","tile":24},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":81},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_SOUTH","tile":100},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_WEST","tile":125},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_NORTH","tile":33},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":71},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":23},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_WEST","tile":37},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_NORTH","tile":52},{"type":"EVENT_TYPE_CHI","open":32007},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":112},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":113},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":115},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_NORTH","tile":46},{},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","tile":77},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_SOUTH","tile":40},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":76},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_NORTH","tile":13},{},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","tile":34},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":80},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_WEST","tile":114},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_NORTH","tile":32},{},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","tile":79},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":22},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":78},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_NORTH","tile":31},{},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","tile":66},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_SOUTH","tile":53},{"type":"EVENT_TYPE_NO_WINNER"}]},"wall":[88,78,131,109,94,57,2,11,41,26,16,38,27,45,91,19,76,99,67,84,92,17,85,133,104,70,21,0,65,18,49,118,110,83,3,44,54,89,14,116,48,58,105,63,102,97,119,87,98,103,35,127,106,50,108,60,20,72,69,51,82,134,126,129,12,96,128,135,73,29,15,43,68,22,117,61,75,115,107,9,23,1,95,62,124,74,130,81,59,6,30,8,36,25,113,123,24,71,100,125,33,112,121,37,52,80,90,46,77,40,5,13,34,93,114,32,79,86,7,31,66,53,47,101,122,39,55,42,120,132,4,64,28,56,111,10],"uraDoras":[64],"privateInfos":[{"initHand":[41,26,16,38,104,70,21,0,48,58,105,63,35],"draws":[108,20,82,12,73,68,75,9,62,81,71,112,77,34,79,66]},{"who":"ABSOLUTE_POS_INIT_SOUTH","initHand":[27,45,91,19,65,18,49,118,102,97,119,87,127],"draws":[72,134,96,29,22,23,124,59,8,113,100,121,80,40,93,86,53]},{"who":"ABSOLUTE_POS_INIT_WEST","initHand":[88,78,131,109,76,99,67,84,110,83,3,44,98],"draws":[106,69,126,128,15,117,115,1,74,6,36,123,125,37,90,5,114,7]},{"who":"ABSOLUTE_POS_INIT_NORTH","initHand":[94,57,2,11,92,17,85,133,54,89,14,116,103],"draws":[50,60,51,129,135,43,61,107,95,130,30,25,24,33,52,46,13,32,31]}],"terminal":{"finalScore":{"round":6,"honba":1,"riichi":1,"ten":[13300,30600,37600,17500]},"noWinner":{"tenpais":[{"closedTiles":[9,12,62,63]},{"who":"ABSOLUTE_POS_INIT_NORTH","closedTiles":[11,14,17,50,51,54,57,60,85,89,92,94,103]}],"tenChanges":[1500,-1500,-1500,1500]}}})",
    R"({"playerIds":["-ron-","ASAPIN","うきでん","超ヒモリロ"],"initScore":{"round":7,"honba":2,"riichi":1,"ten":[13300,30600,37600,17500]},"doras":[99],"eventHistory":{"events":[{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":127},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":110},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":122},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":111},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":129},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":119},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":74},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":130},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":132},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":33},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":94},{"type":"EVENT_TYPE_CHI","who":"ABSOLUTE_POS_INIT_WEST","open":58839},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":37},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":123},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":131},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_SOUTH","tile":134},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":71},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":73},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":64},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":1},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":7},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":47},{"type":"EVENT_TYPE_RON","who":"ABSOLUTE_POS_INIT_SOUTH","tile":47}]},"wall":[61,132,36,46,19,55,77,86,12,31,25,22,40,7,81,21,129,89,14,59,131,51,135,33,38,26,8,1,111,130,62,18,101,16,127,123,119,11,64,97,122,94,52,39,98,93,71,103,47,110,74,82,107,87,35,88,42,2,48,37,73,79,5,17,75,134,45,90,23,30,96,104,117,58,126,78,83,120,102,50,92,100,4,28,76,24,121,69,27,72,63,112,43,133,114,54,70,13,95,85,116,67,3,34,57,105,60,10,41,91,15,109,115,6,84,20,65,118,125,66,32,128,108,53,44,68,80,113,56,106,99,124,49,0,9,29],"uraDoras":[124],"privateInfos":[{"initHand":[19,55,77,86,131,51,135,33,119,11,64,97,110],"draws":[87,2,79,75,23]},{"who":"ABSOLUTE_POS_INIT_SOUTH","initHand":[12,31,25,22,38,26,8,1,122,94,52,39,74],"draws":[35,48,5,134,30]},{"who":"ABSOLUTE_POS_INIT_WEST","initHand":[40,7,81,21,111,130,62,18,98,93,71,103,82],"draws":[88,37,45,96]},{"who":"ABSOLUTE_POS_INIT_NORTH","initHand":[61,132,36,46,129,89,14,59,101,16,127,123,47],"draws":[107,42,73,17,90,104]}],"terminal":{"finalScore":{"round":7,"honba":2,"ten":[13300,34200,37600,14900]},"wins":[{"who":"ABSOLUTE_POS_INIT_SOUTH","fromWho":"ABSOLUTE_POS_INIT_NORTH","closedTiles":[5,8,12,22,25,26,30,31,35,38,39,47,48,52],"winTile":47,"fu":30,"ten":2000,"tenChanges":[0,3600,0,-2600],"yakus":[7,54],"fans":[1,1]}],"isGameOver":true}})",
};

// TEST(state, UpdateStateByAction) {
//     // すべてツモとランダムに切るだけでエラーを吐かないか（鳴きなし）
//     auto state = State({"player0", "player1", "player2", "player3"});
//     std::unique_ptr<AgentClient> agent = std::make_unique<AgentClientMock>();
//     for (int i = 0; i < 50; ++i) {
//         auto drawer = state.UpdateStateByDraw();
//         EXPECT_EQ(drawer, AbsolutePos(i%4));
//         auto action = agent->TakeAction(state.CreateObservation(drawer));
//         state.UpdateStateByAction(action);
//     }
// }

TEST(state, ToJson) {
    // From https://tenhou.net/0/?log=2011020417gm-00a9-0000-b67fcaa3&tw=1
    // w/o terminal state
    std::string original_json = R"({"playerIds":["-ron-","ASAPIN","うきでん","超ヒモリロ"],"initScore":{"ten":[25000,25000,25000,25000]},"doras":[112],"eventHistory":{"events":[{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":39},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":70},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":125},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":5},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":121},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":32},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":102},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":114},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":19},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":24},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":90},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":108},{},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","tile":122},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":17},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_WEST","tile":134},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_NORTH","tile":109},{},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","tile":116},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_SOUTH","tile":127},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_WEST","tile":105},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":100},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":7},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":10},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":26},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":120},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":28},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":98},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":55},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":18},{},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","tile":15},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_RIICHI","who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":115},{"type":"EVENT_TYPE_RIICHI_SCORE_CHANGE","who":"ABSOLUTE_POS_INIT_SOUTH"},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":68},{"type":"EVENT_TYPE_CHI","who":"ABSOLUTE_POS_INIT_NORTH","open":42031},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":23},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":34},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_SOUTH","tile":50},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":31},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":20},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":107},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_SOUTH","tile":97},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":30},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_NORTH","tile":25},{},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","tile":35},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_SOUTH","tile":60},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":29},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":38},{},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","tile":135},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_SOUTH","tile":59},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":37},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_NORTH","tile":9},{},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","tile":27},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_SOUTH","tile":53},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":132},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":67},{},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","tile":110},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_SOUTH","tile":22},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":66},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_NORTH","tile":69},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":48},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_SOUTH","tile":33},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_WEST","tile":8},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":42},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":96},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_SOUTH","tile":64},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":124},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":41},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":21},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_SOUTH","tile":104},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":6},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_NORTH","tile":71},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":16},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_SOUTH","tile":111},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":4}]},"wall":[48,16,19,34,17,62,79,52,55,30,12,26,120,130,42,67,2,76,13,7,56,57,82,98,31,90,3,4,114,93,5,61,128,1,39,121,32,103,24,70,80,125,66,102,20,108,41,100,87,54,78,84,107,47,14,131,96,51,68,85,28,10,6,18,122,49,134,109,116,127,105,65,92,101,29,23,83,115,77,38,15,43,94,21,50,91,89,45,97,37,25,35,60,132,119,135,59,0,9,27,53,58,118,110,22,124,69,44,33,8,74,129,64,88,72,75,104,73,71,81,111,86,36,99,133,11,40,113,123,95,112,117,46,126,63,106],"uraDoras":[117],"privateInfos":[{"initHand":[48,16,19,34,2,76,13,7,128,1,39,121,87],"draws":[107,96,28,122,116,92,83,15,21,45,35,135,27,110,44,129,75,81]},{"who":"ABSOLUTE_POS_INIT_SOUTH","initHand":[17,62,79,52,56,57,82,98,32,103,24,70,54],"draws":[47,51,10,49,127,101,115,43,50,97,60,59,53,22,33,64,104,111]},{"who":"ABSOLUTE_POS_INIT_WEST","initHand":[55,30,12,26,31,90,3,4,80,125,66,102,78],"draws":[14,68,6,134,105,29,77,94,91,37,132,0,58,124,8,88,73,86]},{"who":"ABSOLUTE_POS_INIT_NORTH","initHand":[120,130,42,67,114,93,5,61,20,108,41,100,84],"draws":[131,85,18,109,65,23,38,89,25,119,9,118,69,74,72,71]}]})";
    std::string recovered_json = State(original_json).ToJson();
    EXPECT_EQ(original_json, recovered_json);
    // w/ terminal state
    for (const auto &json: data_from_tenhou) {
        recovered_json = State(json).ToJson();
        EXPECT_EQ(json, recovered_json);
    }
    // TODO(sotetsuk): add test cases from Tenhou's log
}

TEST(state, Next) {
    for (int i = 0; i < data_from_tenhou.size() - 1; ++i) {
        auto curr_state = State(data_from_tenhou[i]);
        auto next_state = curr_state.Next();
        auto expected_next_state = State(data_from_tenhou[i + 1]);
        EXPECT_EQ(next_state.round(), expected_next_state.round());
        EXPECT_EQ(next_state.honba(), expected_next_state.honba());
        EXPECT_EQ(next_state.riichi(), expected_next_state.init_riichi());
        EXPECT_EQ(next_state.tens(), expected_next_state.init_tens());
    }
}

TEST(state, CreateObservation) {
    // ありうる遷移は次の16通り
    //  1. Draw => (1) Tsumo
    //  2. Draw => (2) KanAdded or KanClosed
    //  3. Draw => (3) Riichi
    //  4. Draw => (4) Discard
    //  5. NewDora => (1) Tsumo
    //  6. NewDora => (2) KanAdded or KanClosed
    //  7. NewDora => (3) Riichi
    //  8. NewDora => (4) Discard
    //  9. Riichi => (5) Discard
    // 10. Chi => (6) Discard
    // 11. Pon => (6) Discard
    // 12. DiscardFromHand => (7) Ron
    // 13. DiscardFromHand => (8) Chi, Pon and KanOpened
    // 14. DiscardDrawnTile => (7) Ron
    // 15. DiscardDrawnTile => (8) Chi, Pon and KanOpened
    // 16. RiichiScoreChange => (8) Chi, Pon and KanOpened

    // 特に記述がないテストケースは下記から
    // https://tenhou.net/0/?log=2011020417gm-00a9-0000-b67fcaa3&tw=1

    std::string json; State state; std::unordered_map<PlayerId, Observation> observations; Observation observation;

    //  1. Draw => (1) Tsumo
    json = R"({"playerIds":["-ron-","ASAPIN","うきでん","超ヒモリロ"],"initScore":{"round":3,"honba":2,"riichi":2,"ten":[21500,28500,32800,15200]},"doras":[73],"eventHistory":{"events":[{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":128},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":29},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":125},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":109},{"type":"EVENT_TYPE_PON","open":42058},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":6},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_SOUTH","tile":131},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":120},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":133},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":15},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":36},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":30},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":116},{"type":"EVENT_TYPE_PON","who":"ABSOLUTE_POS_INIT_SOUTH","open":44618},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":54},{"type":"EVENT_TYPE_PON","open":21097},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":45},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_SOUTH","tile":124},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":7},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":72},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":130},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":12},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":33},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":37},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":97},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_SOUTH","tile":5},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":32},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":24},{},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","tile":28},{"who":"ABSOLUTE_POS_INIT_SOUTH"}]},"wall":[128,96,24,46,108,69,111,45,17,81,84,119,120,47,43,7,37,116,78,87,60,53,15,115,68,74,125,36,104,30,100,32,102,4,56,133,112,41,6,29,22,12,77,54,88,109,83,59,51,52,70,33,72,42,94,9,131,13,18,130,117,65,64,124,16,0,97,26,1,10,85,5,86,90,28,91,134,35,93,80,14,135,101,98,107,63,105,114,132,55,71,121,39,34,122,40,19,61,20,49,126,129,21,79,2,118,48,58,110,66,113,3,75,95,99,8,67,82,25,76,92,27,123,38,106,50,103,31,89,127,73,11,44,57,23,62],"uraDoras":[11],"privateInfos":[{"initHand":[108,69,111,45,60,53,15,115,112,41,6,29,52],"draws":[42,130,97,85,28]},{"who":"ABSOLUTE_POS_INIT_SOUTH","initHand":[17,81,84,119,68,74,125,36,22,12,77,54,70],"draws":[94,131,117,124,26,5,91]},{"who":"ABSOLUTE_POS_INIT_WEST","initHand":[120,47,43,7,104,30,100,32,88,109,83,59,33],"draws":[9,13,65,16,1,86]},{"who":"ABSOLUTE_POS_INIT_NORTH","initHand":[128,96,24,46,37,116,78,87,102,4,56,133,51],"draws":[72,18,64,0,10,90]}],"terminal":{"finalScore":{"round":3,"honba":2,"ten":[20800,33100,32100,14000]},"wins":[{"who":"ABSOLUTE_POS_INIT_SOUTH","fromWho":"ABSOLUTE_POS_INIT_SOUTH","closedTiles":[17,22,26,68,70,74,77,81,84,91,94],"opens":[44618],"winTile":91,"fu":30,"ten":2000,"tenChanges":[-700,4600,-700,-1200],"yakus":[12,52],"fans":[1,1]}]}})";
    state = State(json);
    observations = state.CreateObservations();
    EXPECT_EQ(observations.size(), 1);
    EXPECT_TRUE(observations.find("ASAPIN") != observations.end());
    observation = observations["ASAPIN"];
    EXPECT_EQ(observation.possible_actions().size(), 1);
    EXPECT_EQ(observation.possible_actions().front().type(), ActionType::kTsumo);

    //  2. Draw => (2) KanAdded or KanClosed
    // KanAdded. https://tenhou.net/0/?log=2010112714gm-00a9-0000-d497e395
    json = R"({"playerIds":["sawly","ROTTEN","ASAPIN","月千一夜"],"initScore":{"round":2,"ten":[34900,23000,22000,20100]},"doras":[76,44],"eventHistory":{"events":[{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":11},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":117},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":111},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":71},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":78},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":75},{"type":"EVENT_TYPE_PON","who":"ABSOLUTE_POS_INIT_SOUTH","open":28714},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH"},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_WEST","tile":38},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":109},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":123},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":116},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":118},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":1},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":131},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":107},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_WEST","tile":99},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_NORTH","tile":127},{"type":"EVENT_TYPE_PON","who":"ABSOLUTE_POS_INIT_SOUTH","open":48650},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":120},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":64},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":65},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":124},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_SOUTH","tile":5},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":122},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":135},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":34},{"who":"ABSOLUTE_POS_INIT_SOUTH"}]},"wall":[24,48,11,122,135,75,128,65,111,13,46,131,120,125,71,107,118,54,52,121,109,26,42,93,119,123,21,8,80,0,116,58,132,50,64,133,63,32,35,117,100,34,82,83,74,87,89,72,29,1,67,56,78,103,124,126,59,69,38,112,61,22,25,60,86,31,99,127,23,68,3,5,33,51,15,73,43,18,85,55,53,92,114,129,97,113,40,115,90,81,4,2,19,45,105,6,36,10,94,91,12,28,17,30,106,101,79,47,49,102,104,95,41,20,16,110,96,14,134,37,108,70,130,27,39,7,57,84,44,77,76,66,98,9,88,62],"uraDoras":[66,77],"privateInfos":[{"initHand":[111,13,46,131,119,123,21,8,100,34,82,83,67],"draws":[124,61,86,3,15,85,114,40,4,105,94,17,79]},{"who":"ABSOLUTE_POS_INIT_SOUTH","initHand":[120,125,71,107,80,0,116,58,74,87,89,72,56],"draws":[126,22,31,5,73,88,55,129,115,2,6,91,30,47]},{"who":"ABSOLUTE_POS_INIT_WEST","initHand":[24,48,11,122,118,54,52,121,132,50,64,133,29],"draws":[78,59,38,25,99,23,33,43,53,97,90,19,36,12,106]},{"who":"ABSOLUTE_POS_INIT_NORTH","initHand":[135,75,128,65,109,26,42,93,63,32,35,117,1],"draws":[103,69,112,60,127,68,51,18,92,113,81,45,10,28,101]}],"terminal":{"finalScore":{"round":2,"ten":[34900,11000,34000,20100]},"wins":[{"who":"ABSOLUTE_POS_INIT_WEST","fromWho":"ABSOLUTE_POS_INIT_SOUTH","closedTiles":[19,23,24,25,29,33,47,48,50,52,54,59,132,133],"winTile":47,"fu":40,"ten":12000,"tenChanges":[0,-12000,13000,0],"yakus":[1,52,54,53],"fans":[1,2,1,0]}]}})";
    state = State(json);
    observations = state.CreateObservations();
    EXPECT_TRUE(observations.find("ROTTEN") != observations.end());
    observation = observations["ROTTEN"];
    EXPECT_EQ(observation.possible_actions().size(), 1);
    EXPECT_EQ(observation.possible_actions().front().type(), ActionType::kKanAdded);

    //  3. Draw => (3) Riichi
    json = R"({"playerIds":["-ron-","ASAPIN","うきでん","超ヒモリロ"],"initScore":{"ten":[25000,25000,25000,25000]},"doras":[112],"eventHistory":{"events":[{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":39},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":70},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":125},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":5},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":121},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":32},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":102},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":114},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":19},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":24},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":90},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":108},{},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","tile":122},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":17},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_WEST","tile":134},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_NORTH","tile":109},{},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","tile":116},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_SOUTH","tile":127},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_WEST","tile":105},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":100},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":7},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":10},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":26},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":120},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":28},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":98},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":55},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":18},{},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","tile":15},{"who":"ABSOLUTE_POS_INIT_SOUTH"}]},"wall":[48,16,19,34,17,62,79,52,55,30,12,26,120,130,42,67,2,76,13,7,56,57,82,98,31,90,3,4,114,93,5,61,128,1,39,121,32,103,24,70,80,125,66,102,20,108,41,100,87,54,78,84,107,47,14,131,96,51,68,85,28,10,6,18,122,49,134,109,116,127,105,65,92,101,29,23,83,115,77,38,15,43,94,21,50,91,89,45,97,37,25,35,60,132,119,135,59,0,9,27,53,58,118,110,22,124,69,44,33,8,74,129,64,88,72,75,104,73,71,81,111,86,36,99,133,11,40,113,123,95,112,117,46,126,63,106],"uraDoras":[117],"privateInfos":[{"initHand":[48,16,19,34,2,76,13,7,128,1,39,121,87],"draws":[107,96,28,122,116,92,83,15,21,45,35,135,27,110,44,129,75,81]},{"who":"ABSOLUTE_POS_INIT_SOUTH","initHand":[17,62,79,52,56,57,82,98,32,103,24,70,54],"draws":[47,51,10,49,127,101,115,43,50,97,60,59,53,22,33,64,104,111]},{"who":"ABSOLUTE_POS_INIT_WEST","initHand":[55,30,12,26,31,90,3,4,80,125,66,102,78],"draws":[14,68,6,134,105,29,77,94,91,37,132,0,58,124,8,88,73,86]},{"who":"ABSOLUTE_POS_INIT_NORTH","initHand":[120,130,42,67,114,93,5,61,20,108,41,100,84],"draws":[131,85,18,109,65,23,38,89,25,119,9,118,69,74,72,71]}]})";
    state = State(json);
    observations = state.CreateObservations();
    EXPECT_EQ(observations.size(), 1);
    observation = observations["ASAPIN"];
    EXPECT_TRUE(observations.find("ASAPIN") != observations.end());
    EXPECT_EQ(observation.possible_actions().size(), 1);
    EXPECT_EQ(observation.possible_actions().front().type(), ActionType::kRiichi);

    //  4. Draw => (4) Discard
    json = R"({"playerIds":["-ron-","ASAPIN","うきでん","超ヒモリロ"],"initScore":{"ten":[25000,25000,25000,25000]},"doras":[112],"eventHistory":{"events":[{}]},"wall":[48,16,19,34,17,62,79,52,55,30,12,26,120,130,42,67,2,76,13,7,56,57,82,98,31,90,3,4,114,93,5,61,128,1,39,121,32,103,24,70,80,125,66,102,20,108,41,100,87,54,78,84,107,47,14,131,96,51,68,85,28,10,6,18,122,49,134,109,116,127,105,65,92,101,29,23,83,115,77,38,15,43,94,21,50,91,89,45,97,37,25,35,60,132,119,135,59,0,9,27,53,58,118,110,22,124,69,44,33,8,74,129,64,88,72,75,104,73,71,81,111,86,36,99,133,11,40,113,123,95,112,117,46,126,63,106],"uraDoras":[117],"privateInfos":[{"initHand":[48,16,19,34,2,76,13,7,128,1,39,121,87],"draws":[107,96,28,122,116,92,83,15,21,45,35,135,27,110,44,129,75,81]},{"who":"ABSOLUTE_POS_INIT_SOUTH","initHand":[17,62,79,52,56,57,82,98,32,103,24,70,54],"draws":[47,51,10,49,127,101,115,43,50,97,60,59,53,22,33,64,104,111]},{"who":"ABSOLUTE_POS_INIT_WEST","initHand":[55,30,12,26,31,90,3,4,80,125,66,102,78],"draws":[14,68,6,134,105,29,77,94,91,37,132,0,58,124,8,88,73,86]},{"who":"ABSOLUTE_POS_INIT_NORTH","initHand":[120,130,42,67,114,93,5,61,20,108,41,100,84],"draws":[131,85,18,109,65,23,38,89,25,119,9,118,69,74,72,71]}]})";
    state = State(json);
    observations = state.CreateObservations();
    EXPECT_EQ(observations.size(), 1);
    EXPECT_TRUE(observations.find("-ron-") != observations.end());
    observation = observations["-ron-"];
    EXPECT_EQ(observation.possible_actions().size(), 1);
    EXPECT_EQ(observation.possible_actions().front().type(), ActionType::kDiscard);
    EXPECT_TRUE(Any(Tile(39), observation.possible_actions().front().discard_candidates()));

    //  5. NewDora => (1) Tsumo
    //  6. NewDora => (2) KanAdded or KanClosed
    //  7. NewDora => (3) Riichi
    //  8. NewDora => (4) Discard

    // Discard. https://tenhou.net/0/?log=2010112714gm-00a9-0000-d497e395
    json = R"({"playerIds":["sawly","ROTTEN","ASAPIN","月千一夜"],"initScore":{"round":2,"ten":[34900,23000,22000,20100]},"doras":[76,44],"eventHistory":{"events":[{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":11},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":117},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":111},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":71},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":78},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":75},{"type":"EVENT_TYPE_PON","who":"ABSOLUTE_POS_INIT_SOUTH","open":28714},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH"},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_WEST","tile":38},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":109},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":123},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":116},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":118},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":1},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":131},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":107},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_WEST","tile":99},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_NORTH","tile":127},{"type":"EVENT_TYPE_PON","who":"ABSOLUTE_POS_INIT_SOUTH","open":48650},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":120},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":64},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":65},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":124},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_SOUTH","tile":5},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":122},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":135},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":34},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_KAN_ADDED","who":"ABSOLUTE_POS_INIT_SOUTH","open":28722},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_NEW_DORA","tile":44}]},"wall":[24,48,11,122,135,75,128,65,111,13,46,131,120,125,71,107,118,54,52,121,109,26,42,93,119,123,21,8,80,0,116,58,132,50,64,133,63,32,35,117,100,34,82,83,74,87,89,72,29,1,67,56,78,103,124,126,59,69,38,112,61,22,25,60,86,31,99,127,23,68,3,5,33,51,15,73,43,18,85,55,53,92,114,129,97,113,40,115,90,81,4,2,19,45,105,6,36,10,94,91,12,28,17,30,106,101,79,47,49,102,104,95,41,20,16,110,96,14,134,37,108,70,130,27,39,7,57,84,44,77,76,66,98,9,88,62],"uraDoras":[66,77],"privateInfos":[{"initHand":[111,13,46,131,119,123,21,8,100,34,82,83,67],"draws":[124,61,86,3,15,85,114,40,4,105,94,17,79]},{"who":"ABSOLUTE_POS_INIT_SOUTH","initHand":[120,125,71,107,80,0,116,58,74,87,89,72,56],"draws":[126,22,31,5,73,88,55,129,115,2,6,91,30,47]},{"who":"ABSOLUTE_POS_INIT_WEST","initHand":[24,48,11,122,118,54,52,121,132,50,64,133,29],"draws":[78,59,38,25,99,23,33,43,53,97,90,19,36,12,106]},{"who":"ABSOLUTE_POS_INIT_NORTH","initHand":[135,75,128,65,109,26,42,93,63,32,35,117,1],"draws":[103,69,112,60,127,68,51,18,92,113,81,45,10,28,101]}],"terminal":{"finalScore":{"round":2,"ten":[34900,11000,34000,20100]},"wins":[{"who":"ABSOLUTE_POS_INIT_WEST","fromWho":"ABSOLUTE_POS_INIT_SOUTH","closedTiles":[19,23,24,25,29,33,47,48,50,52,54,59,132,133],"winTile":47,"fu":40,"ten":12000,"tenChanges":[0,-12000,13000,0],"yakus":[1,52,54,53],"fans":[1,2,1,0]}]}})";
    state = State(json);
    observations = state.CreateObservations();
    EXPECT_EQ(observations.size(), 1);
    EXPECT_TRUE(observations.find("ROTTEN") != observations.end());
    observation = observations["ROTTEN"];
    EXPECT_EQ(observation.possible_actions().size(), 1);
    EXPECT_EQ(observation.possible_actions().front().type(), ActionType::kDiscard);

    //  9. Riichi => (5) Discard
    // 可能なdiscardは南だけ。
    json = R"({"playerIds":["-ron-","ASAPIN","うきでん","超ヒモリロ"],"initScore":{"ten":[25000,25000,25000,25000]},"doras":[112],"eventHistory":{"events":[{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":39},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":70},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":125},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":5},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":121},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":32},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":102},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":114},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":19},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":24},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":90},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":108},{},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","tile":122},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":17},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_WEST","tile":134},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_NORTH","tile":109},{},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","tile":116},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_SOUTH","tile":127},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_WEST","tile":105},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":100},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":7},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":10},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":26},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":120},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":28},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":98},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":55},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":18},{},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","tile":15},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_RIICHI","who":"ABSOLUTE_POS_INIT_SOUTH"}]},"wall":[48,16,19,34,17,62,79,52,55,30,12,26,120,130,42,67,2,76,13,7,56,57,82,98,31,90,3,4,114,93,5,61,128,1,39,121,32,103,24,70,80,125,66,102,20,108,41,100,87,54,78,84,107,47,14,131,96,51,68,85,28,10,6,18,122,49,134,109,116,127,105,65,92,101,29,23,83,115,77,38,15,43,94,21,50,91,89,45,97,37,25,35,60,132,119,135,59,0,9,27,53,58,118,110,22,124,69,44,33,8,74,129,64,88,72,75,104,73,71,81,111,86,36,99,133,11,40,113,123,95,112,117,46,126,63,106],"uraDoras":[117],"privateInfos":[{"initHand":[48,16,19,34,2,76,13,7,128,1,39,121,87],"draws":[107,96,28,122,116,92,83,15,21,45,35,135,27,110,44,129,75,81]},{"who":"ABSOLUTE_POS_INIT_SOUTH","initHand":[17,62,79,52,56,57,82,98,32,103,24,70,54],"draws":[47,51,10,49,127,101,115,43,50,97,60,59,53,22,33,64,104,111]},{"who":"ABSOLUTE_POS_INIT_WEST","initHand":[55,30,12,26,31,90,3,4,80,125,66,102,78],"draws":[14,68,6,134,105,29,77,94,91,37,132,0,58,124,8,88,73,86]},{"who":"ABSOLUTE_POS_INIT_NORTH","initHand":[120,130,42,67,114,93,5,61,20,108,41,100,84],"draws":[131,85,18,109,65,23,38,89,25,119,9,118,69,74,72,71]}],"terminal":{"finalScore":{"riichi":1,"ten":[24000,27000,24000,24000]},"noWinner":{"tenpais":[{"who":"ABSOLUTE_POS_INIT_SOUTH","closedTiles":[43,47,49,51,52,54,56,57,62,79,82,101,103]}],"tenChanges":[-1000,3000,-1000,-1000]}}})";
    state = State(json);
    observations = state.CreateObservations();
    EXPECT_EQ(observations.size(), 1);
    EXPECT_TRUE(observations.find("ASAPIN") != observations.end());
    observation = observations["ASAPIN"];
    EXPECT_EQ(observation.possible_actions().size(), 1);
    EXPECT_EQ(observation.possible_actions().front().type(), ActionType::kDiscard);
    EXPECT_EQ(observation.possible_actions().front().discard_candidates().size(), 1);
    EXPECT_EQ(observation.possible_actions().front().discard_candidates().front().Type(), TileType::kSW);

    // 10. Chi => (6) Discard
    // 34566mから567mのチーで4mは喰い替えになるので切れない
    json = R"({"playerIds":["-ron-","ASAPIN","うきでん","超ヒモリロ"],"initScore":{"round":4,"ten":[20800,33100,32100,14000]},"doras":[60],"eventHistory":{"events":[{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":121},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":118},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":122},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":115},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":105},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":124},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_WEST","tile":28},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":110},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":114},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":74},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":106},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":126},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":128},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_SOUTH","tile":54},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":40},{"type":"EVENT_TYPE_PON","who":"ABSOLUTE_POS_INIT_SOUTH","open":15401},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":63},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_WEST","tile":39},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_NORTH","tile":135},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":45},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":30},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":71},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":31},{},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","tile":113},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_SOUTH","tile":35},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":3},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_NORTH","tile":70},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":1},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_SOUTH","tile":116},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":14},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":48},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":27},{"type":"EVENT_TYPE_CHI","who":"ABSOLUTE_POS_INIT_SOUTH","open":14735}]},"wall":[9,87,95,105,94,43,102,63,29,3,4,93,21,49,104,19,114,45,67,121,23,30,78,118,25,71,72,97,55,48,129,126,27,89,128,91,15,11,124,20,106,22,40,122,13,131,115,59,61,74,81,31,1,42,34,110,16,17,28,101,82,77,52,5,58,54,14,39,135,85,99,6,0,113,35,76,70,56,116,46,66,50,88,32,134,26,38,125,65,80,119,75,7,69,86,103,8,107,108,133,37,98,73,24,90,33,47,123,127,84,83,57,109,68,41,79,120,111,117,53,18,36,10,51,92,112,96,130,100,132,60,2,44,12,64,62],"uraDoras":[2],"privateInfos":[{"initHand":[9,87,95,105,114,45,67,121,27,89,128,91,61],"draws":[1,16,82,58,85,113,56,50,134,65]},{"who":"ABSOLUTE_POS_INIT_SOUTH","initHand":[94,43,102,63,23,30,78,118,15,11,124,20,74],"draws":[42,17,77,54,99,35,116,26]},{"who":"ABSOLUTE_POS_INIT_WEST","initHand":[29,3,4,93,25,71,72,97,106,22,40,122,81],"draws":[34,28,52,14,39,6,76,46,88,38]},{"who":"ABSOLUTE_POS_INIT_NORTH","initHand":[21,49,104,19,55,48,129,126,13,131,115,59,31],"draws":[110,101,5,135,0,70,66,32,125]}],"terminal":{"finalScore":{"round":4,"ten":[12800,33100,40100,14000]},"wins":[{"who":"ABSOLUTE_POS_INIT_WEST","closedTiles":[4,6,22,25,29,46,50,52,72,76,81,88,93,97],"winTile":50,"fu":40,"ten":8000,"tenChanges":[-8000,0,9000,0],"yakus":[1,54,53],"fans":[1,2,2]}]}})";
    state = State(json);
    observations = state.CreateObservations();
    EXPECT_EQ(observations.size(), 1);
    EXPECT_TRUE(observations.find("ASAPIN") != observations.end());
    observation = observations["ASAPIN"];
    EXPECT_EQ(observation.possible_actions().size(), 1);
    EXPECT_EQ(observation.possible_actions().front().type(), ActionType::kDiscard);
    EXPECT_EQ(observation.possible_actions().front().discard_candidates().size(), 7);
    for (auto tile : observation.possible_actions().front().discard_candidates()) EXPECT_NE(tile.Type(), TileType::kM4);

    // 11. Pon => (6) Discard
    json = R"({"playerIds":["-ron-","ASAPIN","うきでん","超ヒモリロ"],"initScore":{"round":1,"honba":1,"riichi":1,"ten":[24000,27000,24000,24000]},"doras":[69],"eventHistory":{"events":[{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":122},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":132},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":13},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":68},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":3},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_WEST","tile":130},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_NORTH","tile":27},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":87},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":32},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":43},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_NORTH","tile":54},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":134},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_SOUTH","tile":119},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":81},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_NORTH","tile":135},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":15},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":125},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_WEST","tile":121},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_NORTH","tile":19},{},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","tile":7},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":47},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":50},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":46},{},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","tile":4},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_RIICHI","who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":111},{"type":"EVENT_TYPE_RIICHI_SCORE_CHANGE","who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_PON","who":"ABSOLUTE_POS_INIT_NORTH","open":42538}]},"wall":[122,36,38,65,62,49,50,25,46,83,95,100,85,87,20,68,22,3,56,14,52,43,42,9,73,115,127,77,26,89,117,15,32,98,111,47,17,24,81,132,86,110,116,76,134,82,72,75,96,6,13,48,125,37,114,99,97,130,27,107,5,45,54,124,119,58,135,105,10,121,19,7,29,60,108,4,63,106,30,1,33,126,79,51,11,64,2,133,35,61,94,78,120,101,70,92,128,55,44,88,84,23,53,18,67,57,71,31,118,131,109,112,40,0,66,74,113,41,91,28,8,102,90,123,12,104,34,21,80,103,69,59,129,39,16,93],"uraDoras":[59],"privateInfos":[{"initHand":[85,87,20,68,26,89,117,15,134,82,72,75,48],"draws":[99,107,124,105,7,4,106,126,51,133,78,92]},{"who":"ABSOLUTE_POS_INIT_SOUTH","initHand":[122,36,38,65,22,3,56,14,32,98,111,47,96],"draws":[125,97,5,119,10,29,63,30,79,11,35,120,128]},{"who":"ABSOLUTE_POS_INIT_WEST","initHand":[62,49,50,25,52,43,42,9,17,24,81,132,6],"draws":[37,130,45,58,121,60,1,64,61,101,55]},{"who":"ABSOLUTE_POS_INIT_NORTH","initHand":[46,83,95,100,73,115,127,77,86,110,116,76,13],"draws":[114,27,54,135,19,108,33,2,94,70,44]}],"terminal":{"finalScore":{"round":1,"honba":1,"ten":[24000,26000,34300,15700]},"wins":[{"who":"ABSOLUTE_POS_INIT_WEST","fromWho":"ABSOLUTE_POS_INIT_NORTH","closedTiles":[1,6,9,24,25,37,42,44,45,49,52,58,60,64],"winTile":44,"fu":30,"ten":8000,"tenChanges":[0,0,11300,-8300],"yakus":[1,7,52,54,53],"fans":[1,1,1,1,1]}]}})";
    state = State(json);
    observations = state.CreateObservations();
    EXPECT_EQ(observations.size(), 1);
    EXPECT_TRUE(observations.find("超ヒモリロ") != observations.end());
    observation = observations["超ヒモリロ"];
    EXPECT_EQ(observation.possible_actions().size(), 1);
    EXPECT_EQ(observation.possible_actions().front().type(), ActionType::kDiscard);

    // 12. DiscardFromHand => (7) Ron

    // 13. DiscardFromHand => (8) Chi, Pon and KanOpened
    // Chi.
    json = R"({"playerIds":["-ron-","ASAPIN","うきでん","超ヒモリロ"],"initScore":{"ten":[25000,25000,25000,25000]},"doras":[112],"eventHistory":{"events":[{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":39},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":70},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":125},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":5},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":121},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":32},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":102},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":114},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":19},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":24},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":90},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":108},{},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","tile":122},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":17},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_WEST","tile":134},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_NORTH","tile":109},{},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","tile":116},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_SOUTH","tile":127},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_WEST","tile":105},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":100},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":7},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":10},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":26},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":120},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":28},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":98},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":55},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":18},{},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","tile":15},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_RIICHI","who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":115},{"type":"EVENT_TYPE_RIICHI_SCORE_CHANGE","who":"ABSOLUTE_POS_INIT_SOUTH"},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":68}]},"wall":[48,16,19,34,17,62,79,52,55,30,12,26,120,130,42,67,2,76,13,7,56,57,82,98,31,90,3,4,114,93,5,61,128,1,39,121,32,103,24,70,80,125,66,102,20,108,41,100,87,54,78,84,107,47,14,131,96,51,68,85,28,10,6,18,122,49,134,109,116,127,105,65,92,101,29,23,83,115,77,38,15,43,94,21,50,91,89,45,97,37,25,35,60,132,119,135,59,0,9,27,53,58,118,110,22,124,69,44,33,8,74,129,64,88,72,75,104,73,71,81,111,86,36,99,133,11,40,113,123,95,112,117,46,126,63,106],"uraDoras":[117],"privateInfos":[{"initHand":[48,16,19,34,2,76,13,7,128,1,39,121,87],"draws":[107,96,28,122,116,92,83,15,21,45,35,135,27,110,44,129,75,81]},{"who":"ABSOLUTE_POS_INIT_SOUTH","initHand":[17,62,79,52,56,57,82,98,32,103,24,70,54],"draws":[47,51,10,49,127,101,115,43,50,97,60,59,53,22,33,64,104,111]},{"who":"ABSOLUTE_POS_INIT_WEST","initHand":[55,30,12,26,31,90,3,4,80,125,66,102,78],"draws":[14,68,6,134,105,29,77,94,91,37,132,0,58,124,8,88,73,86]},{"who":"ABSOLUTE_POS_INIT_NORTH","initHand":[120,130,42,67,114,93,5,61,20,108,41,100,84],"draws":[131,85,18,109,65,23,38,89,25,119,9,118,69,74,72,71]}],"terminal":{"finalScore":{"riichi":1,"ten":[24000,27000,24000,24000]},"noWinner":{"tenpais":[{"who":"ABSOLUTE_POS_INIT_SOUTH","closedTiles":[43,47,49,51,52,54,56,57,62,79,82,101,103]}],"tenChanges":[-1000,3000,-1000,-1000]}}})";
    state = State(json);
    observations = state.CreateObservations();
    EXPECT_EQ(observations.size(), 1);
    EXPECT_TRUE(observations.find("超ヒモリロ") != observations.end());
    observation = observations["超ヒモリロ"];
    EXPECT_EQ(observation.possible_actions().size(), 1);
    EXPECT_EQ(observation.possible_actions().front().type(), ActionType::kChi);
    EXPECT_EQ(observation.possible_actions().front().open().GetBits(), 42031);

    // 14. DiscardDrawnTile => (7) Ron
    json = R"({"playerIds":["-ron-","ASAPIN","うきでん","超ヒモリロ"],"initScore":{"round":1,"honba":1,"riichi":1,"ten":[24000,27000,24000,24000]},"doras":[69],"eventHistory":{"events":[{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":122},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":132},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":13},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":68},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":3},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_WEST","tile":130},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_NORTH","tile":27},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":87},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":32},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":43},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_NORTH","tile":54},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":134},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_SOUTH","tile":119},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":81},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_NORTH","tile":135},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":15},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":125},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_WEST","tile":121},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_NORTH","tile":19},{},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","tile":7},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":47},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":50},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":46},{},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","tile":4},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_RIICHI","who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":111},{"type":"EVENT_TYPE_RIICHI_SCORE_CHANGE","who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_PON","who":"ABSOLUTE_POS_INIT_NORTH","open":42538},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":127},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":124},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_SOUTH","tile":30},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":17},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_NORTH","tile":33},{},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","tile":126},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_SOUTH","tile":79},{"type":"EVENT_TYPE_PON","who":"ABSOLUTE_POS_INIT_NORTH","open":30282},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":116},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":117},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_SOUTH","tile":11},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_RIICHI","who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":62},{"type":"EVENT_TYPE_RIICHI_SCORE_CHANGE","who":"ABSOLUTE_POS_INIT_WEST"},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_NORTH","tile":2},{},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","tile":133},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_SOUTH","tile":35},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_WEST","tile":61},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":73},{},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","tile":78},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_SOUTH","tile":120},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_WEST","tile":101},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":100},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":75},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_SOUTH","tile":128},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_WEST","tile":55},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_NORTH","tile":44}]},"wall":[122,36,38,65,62,49,50,25,46,83,95,100,85,87,20,68,22,3,56,14,52,43,42,9,73,115,127,77,26,89,117,15,32,98,111,47,17,24,81,132,86,110,116,76,134,82,72,75,96,6,13,48,125,37,114,99,97,130,27,107,5,45,54,124,119,58,135,105,10,121,19,7,29,60,108,4,63,106,30,1,33,126,79,51,11,64,2,133,35,61,94,78,120,101,70,92,128,55,44,88,84,23,53,18,67,57,71,31,118,131,109,112,40,0,66,74,113,41,91,28,8,102,90,123,12,104,34,21,80,103,69,59,129,39,16,93],"uraDoras":[59],"privateInfos":[{"initHand":[85,87,20,68,26,89,117,15,134,82,72,75,48],"draws":[99,107,124,105,7,4,106,126,51,133,78,92]},{"who":"ABSOLUTE_POS_INIT_SOUTH","initHand":[122,36,38,65,22,3,56,14,32,98,111,47,96],"draws":[125,97,5,119,10,29,63,30,79,11,35,120,128]},{"who":"ABSOLUTE_POS_INIT_WEST","initHand":[62,49,50,25,52,43,42,9,17,24,81,132,6],"draws":[37,130,45,58,121,60,1,64,61,101,55]},{"who":"ABSOLUTE_POS_INIT_NORTH","initHand":[46,83,95,100,73,115,127,77,86,110,116,76,13],"draws":[114,27,54,135,19,108,33,2,94,70,44]}],"terminal":{"finalScore":{"round":1,"honba":1,"ten":[24000,26000,34300,15700]},"wins":[{"who":"ABSOLUTE_POS_INIT_WEST","fromWho":"ABSOLUTE_POS_INIT_NORTH","closedTiles":[1,6,9,24,25,37,42,44,45,49,52,58,60,64],"winTile":44,"fu":30,"ten":8000,"tenChanges":[0,0,11300,-8300],"yakus":[1,7,52,54,53],"fans":[1,1,1,1,1]}]}})";
    state = State(json);
    observations = state.CreateObservations();
    EXPECT_EQ(observations.size(), 1);
    EXPECT_TRUE(observations.find("うきでん") != observations.end());
    observation = observations["うきでん"];
    EXPECT_EQ(observation.possible_actions().size(), 1);
    EXPECT_EQ(observation.possible_actions().front().type(), ActionType::kRon);

    // 15. DiscardDrawnTile => (8) Chi, Pon and KanOpened

    // 16. RiichiScoreChange => (8) Chi, Pon and KanOpened
    // Pon.
    json = R"({"playerIds":["-ron-","ASAPIN","うきでん","超ヒモリロ"],"initScore":{"round":1,"honba":1,"riichi":1,"ten":[24000,27000,24000,24000]},"doras":[69],"eventHistory":{"events":[{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":122},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":132},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":13},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":68},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":3},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_WEST","tile":130},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_NORTH","tile":27},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":87},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":32},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":43},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_NORTH","tile":54},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":134},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_SOUTH","tile":119},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":81},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_NORTH","tile":135},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":15},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":125},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_WEST","tile":121},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_NORTH","tile":19},{},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","tile":7},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":47},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":50},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":46},{},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","tile":4},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_RIICHI","who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":111},{"type":"EVENT_TYPE_RIICHI_SCORE_CHANGE","who":"ABSOLUTE_POS_INIT_SOUTH"}]},"wall":[122,36,38,65,62,49,50,25,46,83,95,100,85,87,20,68,22,3,56,14,52,43,42,9,73,115,127,77,26,89,117,15,32,98,111,47,17,24,81,132,86,110,116,76,134,82,72,75,96,6,13,48,125,37,114,99,97,130,27,107,5,45,54,124,119,58,135,105,10,121,19,7,29,60,108,4,63,106,30,1,33,126,79,51,11,64,2,133,35,61,94,78,120,101,70,92,128,55,44,88,84,23,53,18,67,57,71,31,118,131,109,112,40,0,66,74,113,41,91,28,8,102,90,123,12,104,34,21,80,103,69,59,129,39,16,93],"uraDoras":[59],"privateInfos":[{"initHand":[85,87,20,68,26,89,117,15,134,82,72,75,48],"draws":[99,107,124,105,7,4,106,126,51,133,78,92]},{"who":"ABSOLUTE_POS_INIT_SOUTH","initHand":[122,36,38,65,22,3,56,14,32,98,111,47,96],"draws":[125,97,5,119,10,29,63,30,79,11,35,120,128]},{"who":"ABSOLUTE_POS_INIT_WEST","initHand":[62,49,50,25,52,43,42,9,17,24,81,132,6],"draws":[37,130,45,58,121,60,1,64,61,101,55]},{"who":"ABSOLUTE_POS_INIT_NORTH","initHand":[46,83,95,100,73,115,127,77,86,110,116,76,13],"draws":[114,27,54,135,19,108,33,2,94,70,44]}],"terminal":{"finalScore":{"round":1,"honba":1,"ten":[24000,26000,34300,15700]},"wins":[{"who":"ABSOLUTE_POS_INIT_WEST","fromWho":"ABSOLUTE_POS_INIT_NORTH","closedTiles":[1,6,9,24,25,37,42,44,45,49,52,58,60,64],"winTile":44,"fu":30,"ten":8000,"tenChanges":[0,0,11300,-8300],"yakus":[1,7,52,54,53],"fans":[1,1,1,1,1]}]}})";
    state = State(json);
    observations = state.CreateObservations();
    EXPECT_EQ(observations.size(), 1);
    EXPECT_TRUE(observations.find("超ヒモリロ") != observations.end());
    observation = observations["超ヒモリロ"];
    EXPECT_EQ(observation.possible_actions().size(), 1);
    EXPECT_EQ(observation.possible_actions().front().type(), ActionType::kPon);
    EXPECT_EQ(observation.possible_actions().front().open().GetBits(), 42538);
}

TEST(state, Update) {
    // 特に記述がないテストケースは下記から
    // https://tenhou.net/0/?log=2011020417gm-00a9-0000-b67fcaa3&tw=1
    std::string json_before, json_after; State state_before, state_after; std::vector<Action> actions;

    // Draw後にDiscard actionでupdate
    // before: <mjloggm ver="2.3"><SHUFFLE seed="mt19937ar-sha512-n288-base64,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" ref=""/><GO type="169" lobby="0"/><UN n0="%2D%72%6F%6E%2D" n1="%41%53%41%50%49%4E" n2="%E3%81%86%E3%81%8D%E3%81%A7%E3%82%93" n3="%E8%B6%85%E3%83%92%E3%83%A2%E3%83%AA%E3%83%AD" dan="16,19,16,18" rate="2135.55,2260.11,2018.07,2198.52" sx="M,M,M,M"/><TAIKYOKU oya="0"/><INIT seed="0,0,0,2,2,112" ten="250,250,250,250" oya="0" hai0="48,16,19,34,2,76,13,7,128,1,39,121,87" hai1="17,62,79,52,56,57,82,98,32,103,24,70,54" hai2="55,30,12,26,31,90,3,4,80,125,66,102,78" hai3="120,130,42,67,114,93,5,61,20,108,41,100,84"/><T107/></mjloggm>
    // after: <mjloggm ver="2.3"><SHUFFLE seed="mt19937ar-sha512-n288-base64,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" ref=""/><GO type="169" lobby="0"/><UN n0="%2D%72%6F%6E%2D" n1="%41%53%41%50%49%4E" n2="%E3%81%86%E3%81%8D%E3%81%A7%E3%82%93" n3="%E8%B6%85%E3%83%92%E3%83%A2%E3%83%AA%E3%83%AD" dan="16,19,16,18" rate="2135.55,2260.11,2018.07,2198.52" sx="M,M,M,M"/><TAIKYOKU oya="0"/><INIT seed="0,0,0,2,2,112" ten="250,250,250,250" oya="0" hai0="48,16,19,34,2,76,13,7,128,1,39,121,87" hai1="17,62,79,52,56,57,82,98,32,103,24,70,54" hai2="55,30,12,26,31,90,3,4,80,125,66,102,78" hai3="120,130,42,67,114,93,5,61,20,108,41,100,84"/><T107/><D39/></mjloggm>
    // action: 起家 discard 39
    json_before = R"({"playerIds":["-ron-","ASAPIN","うきでん","超ヒモリロ"],"initScore":{"ten":[25000,25000,25000,25000]},"doras":[112],"eventHistory":{"events":[{}]},"wall":[48,16,19,34,17,62,79,52,55,30,12,26,120,130,42,67,2,76,13,7,56,57,82,98,31,90,3,4,114,93,5,61,128,1,39,121,32,103,24,70,80,125,66,102,20,108,41,100,87,54,78,84,107,47,14,131,96,51,68,85,28,10,6,18,122,49,134,109,116,127,105,65,92,101,29,23,83,115,77,38,15,43,94,21,50,91,89,45,97,37,25,35,60,132,119,135,59,0,9,27,53,58,118,110,22,124,69,44,33,8,74,129,64,88,72,75,104,73,71,81,111,86,36,99,133,11,40,113,123,95,112,117,46,126,63,106],"uraDoras":[117],"privateInfos":[{"initHand":[48,16,19,34,2,76,13,7,128,1,39,121,87],"draws":[107]},{"who":"ABSOLUTE_POS_INIT_SOUTH","initHand":[17,62,79,52,56,57,82,98,32,103,24,70,54]},{"who":"ABSOLUTE_POS_INIT_WEST","initHand":[55,30,12,26,31,90,3,4,80,125,66,102,78]},{"who":"ABSOLUTE_POS_INIT_NORTH","initHand":[120,130,42,67,114,93,5,61,20,108,41,100,84]}],"terminal":{"finalScore":{"ten":[25000,25000,25000,25000]}}})";
    json_after = R"({"playerIds":["-ron-","ASAPIN","うきでん","超ヒモリロ"],"initScore":{"ten":[25000,25000,25000,25000]},"doras":[112],"eventHistory":{"events":[{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":39}]},"wall":[48,16,19,34,17,62,79,52,55,30,12,26,120,130,42,67,2,76,13,7,56,57,82,98,31,90,3,4,114,93,5,61,128,1,39,121,32,103,24,70,80,125,66,102,20,108,41,100,87,54,78,84,107,47,14,131,96,51,68,85,28,10,6,18,122,49,134,109,116,127,105,65,92,101,29,23,83,115,77,38,15,43,94,21,50,91,89,45,97,37,25,35,60,132,119,135,59,0,9,27,53,58,118,110,22,124,69,44,33,8,74,129,64,88,72,75,104,73,71,81,111,86,36,99,133,11,40,113,123,95,112,117,46,126,63,106],"uraDoras":[117],"privateInfos":[{"initHand":[48,16,19,34,2,76,13,7,128,1,39,121,87],"draws":[107]},{"who":"ABSOLUTE_POS_INIT_SOUTH","initHand":[17,62,79,52,56,57,82,98,32,103,24,70,54]},{"who":"ABSOLUTE_POS_INIT_WEST","initHand":[55,30,12,26,31,90,3,4,80,125,66,102,78]},{"who":"ABSOLUTE_POS_INIT_NORTH","initHand":[120,130,42,67,114,93,5,61,20,108,41,100,84]}],"terminal":{"finalScore":{"ten":[25000,25000,25000,25000]}}})";
    state_before = State(json_before);
    state_after = State(json_after);
    actions = { Action::CreateDiscard(AbsolutePos::kInitEast, Tile(39)) };
    state_before.Update(std::move(actions));
    EXPECT_EQ(state_before.ToJson(), state_after.ToJson());

    // Draw後にRiichiでupdate
    // before: <mjloggm ver="2.3"><SHUFFLE seed="mt19937ar-sha512-n288-base64,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" ref=""/><GO type="169" lobby="0"/><UN n0="%2D%72%6F%6E%2D" n1="%41%53%41%50%49%4E" n2="%E3%81%86%E3%81%8D%E3%81%A7%E3%82%93" n3="%E8%B6%85%E3%83%92%E3%83%A2%E3%83%AA%E3%83%AD" dan="16,19,16,18" rate="2135.55,2260.11,2018.07,2198.52" sx="M,M,M,M"/><TAIKYOKU oya="0"/><INIT seed="0,0,0,2,2,112" ten="250,250,250,250" oya="0" hai0="48,16,19,34,2,76,13,7,128,1,39,121,87" hai1="17,62,79,52,56,57,82,98,32,103,24,70,54" hai2="55,30,12,26,31,90,3,4,80,125,66,102,78" hai3="120,130,42,67,114,93,5,61,20,108,41,100,84"/><T107/><D39/><U47/><E70/><V14/><F125/><W131/><G5/><T96/><D121/><U51/><E32/><V68/><F102/><W85/><G114/><T28/><D19/><U10/><E24/><V6/><F90/><W18/><G108/><T122/><D122/><U49/><E17/><V134/><F134/><W109/><G109/><T116/><D116/><U127/><E127/><V105/><F105/><W65/><G100/><T92/><D7/><U101/><E10/><V29/><F26/><W23/><G120/><T83/><D28/><U115/><E98/><V77/><F55/><W38/><G18/><T15/><D15/><U43/></mjloggm>
    // after: <mjloggm ver="2.3"><SHUFFLE seed="mt19937ar-sha512-n288-base64,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" ref=""/><GO type="169" lobby="0"/><UN n0="%2D%72%6F%6E%2D" n1="%41%53%41%50%49%4E" n2="%E3%81%86%E3%81%8D%E3%81%A7%E3%82%93" n3="%E8%B6%85%E3%83%92%E3%83%A2%E3%83%AA%E3%83%AD" dan="16,19,16,18" rate="2135.55,2260.11,2018.07,2198.52" sx="M,M,M,M"/><TAIKYOKU oya="0"/><INIT seed="0,0,0,2,2,112" ten="250,250,250,250" oya="0" hai0="48,16,19,34,2,76,13,7,128,1,39,121,87" hai1="17,62,79,52,56,57,82,98,32,103,24,70,54" hai2="55,30,12,26,31,90,3,4,80,125,66,102,78" hai3="120,130,42,67,114,93,5,61,20,108,41,100,84"/><T107/><D39/><U47/><E70/><V14/><F125/><W131/><G5/><T96/><D121/><U51/><E32/><V68/><F102/><W85/><G114/><T28/><D19/><U10/><E24/><V6/><F90/><W18/><G108/><T122/><D122/><U49/><E17/><V134/><F134/><W109/><G109/><T116/><D116/><U127/><E127/><V105/><F105/><W65/><G100/><T92/><D7/><U101/><E10/><V29/><F26/><W23/><G120/><T83/><D28/><U115/><E98/><V77/><F55/><W38/><G18/><T15/><D15/><U43/><REACH who="1" step="1"/></mjloggm>
    // action: InitSouth Riichi
    json_before = R"({"playerIds":["-ron-","ASAPIN","うきでん","超ヒモリロ"],"initScore":{"ten":[25000,25000,25000,25000]},"doras":[112],"eventHistory":{"events":[{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":39},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":70},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":125},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":5},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":121},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":32},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":102},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":114},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":19},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":24},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":90},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":108},{},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","tile":122},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":17},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_WEST","tile":134},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_NORTH","tile":109},{},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","tile":116},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_SOUTH","tile":127},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_WEST","tile":105},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":100},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":7},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":10},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":26},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":120},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":28},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":98},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":55},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":18},{},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","tile":15},{"who":"ABSOLUTE_POS_INIT_SOUTH"}]},"wall":[48,16,19,34,17,62,79,52,55,30,12,26,120,130,42,67,2,76,13,7,56,57,82,98,31,90,3,4,114,93,5,61,128,1,39,121,32,103,24,70,80,125,66,102,20,108,41,100,87,54,78,84,107,47,14,131,96,51,68,85,28,10,6,18,122,49,134,109,116,127,105,65,92,101,29,23,83,115,77,38,15,43,94,21,50,91,89,45,97,37,25,35,60,132,119,135,59,0,9,27,53,58,118,110,22,124,69,44,33,8,74,129,64,88,72,75,104,73,71,81,111,86,36,99,133,11,40,113,123,95,112,117,46,126,63,106],"uraDoras":[117],"privateInfos":[{"initHand":[48,16,19,34,2,76,13,7,128,1,39,121,87],"draws":[107,96,28,122,116,92,83,15]},{"who":"ABSOLUTE_POS_INIT_SOUTH","initHand":[17,62,79,52,56,57,82,98,32,103,24,70,54],"draws":[47,51,10,49,127,101,115,43]},{"who":"ABSOLUTE_POS_INIT_WEST","initHand":[55,30,12,26,31,90,3,4,80,125,66,102,78],"draws":[14,68,6,134,105,29,77]},{"who":"ABSOLUTE_POS_INIT_NORTH","initHand":[120,130,42,67,114,93,5,61,20,108,41,100,84],"draws":[131,85,18,109,65,23,38]}],"terminal":{"finalScore":{"ten":[25000,25000,25000,25000]}}})";
    json_after = R"({"playerIds":["-ron-","ASAPIN","うきでん","超ヒモリロ"],"initScore":{"ten":[25000,25000,25000,25000]},"doras":[112],"eventHistory":{"events":[{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":39},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":70},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":125},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":5},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":121},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":32},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":102},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":114},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":19},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":24},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":90},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":108},{},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","tile":122},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":17},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_WEST","tile":134},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_NORTH","tile":109},{},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","tile":116},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_SOUTH","tile":127},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","who":"ABSOLUTE_POS_INIT_WEST","tile":105},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":100},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":7},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":10},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":26},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":120},{},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","tile":28},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_SOUTH","tile":98},{"who":"ABSOLUTE_POS_INIT_WEST"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_WEST","tile":55},{"who":"ABSOLUTE_POS_INIT_NORTH"},{"type":"EVENT_TYPE_DISCARD_FROM_HAND","who":"ABSOLUTE_POS_INIT_NORTH","tile":18},{},{"type":"EVENT_TYPE_DISCARD_DRAWN_TILE","tile":15},{"who":"ABSOLUTE_POS_INIT_SOUTH"},{"type":"EVENT_TYPE_RIICHI","who":"ABSOLUTE_POS_INIT_SOUTH"}]},"wall":[48,16,19,34,17,62,79,52,55,30,12,26,120,130,42,67,2,76,13,7,56,57,82,98,31,90,3,4,114,93,5,61,128,1,39,121,32,103,24,70,80,125,66,102,20,108,41,100,87,54,78,84,107,47,14,131,96,51,68,85,28,10,6,18,122,49,134,109,116,127,105,65,92,101,29,23,83,115,77,38,15,43,94,21,50,91,89,45,97,37,25,35,60,132,119,135,59,0,9,27,53,58,118,110,22,124,69,44,33,8,74,129,64,88,72,75,104,73,71,81,111,86,36,99,133,11,40,113,123,95,112,117,46,126,63,106],"uraDoras":[117],"privateInfos":[{"initHand":[48,16,19,34,2,76,13,7,128,1,39,121,87],"draws":[107,96,28,122,116,92,83,15]},{"who":"ABSOLUTE_POS_INIT_SOUTH","initHand":[17,62,79,52,56,57,82,98,32,103,24,70,54],"draws":[47,51,10,49,127,101,115,43]},{"who":"ABSOLUTE_POS_INIT_WEST","initHand":[55,30,12,26,31,90,3,4,80,125,66,102,78],"draws":[14,68,6,134,105,29,77]},{"who":"ABSOLUTE_POS_INIT_NORTH","initHand":[120,130,42,67,114,93,5,61,20,108,41,100,84],"draws":[131,85,18,109,65,23,38]}],"terminal":{"finalScore":{"ten":[25000,25000,25000,25000]}}})";
    state_before = State(json_before);
    state_after = State(json_after);
    actions = { Action::CreateRiichi(AbsolutePos::kInitSouth, true) };
    state_before.Update(std::move(actions));
    EXPECT_EQ(state_before.ToJson(), state_after.ToJson());

    // Draw後にRiichiをしなかった場合、次のCreateObservationがDiscard
}
